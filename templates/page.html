{% extends "base.html" %}

{% block title %}
    {% if page %}
        {% if page.extra.blog %}
            {{ page.title }}
        {% else %}
            {{ page.title }} - {{ config.title }}
        {% endif %}
    {% elif section %}
        {% if section.extra.blog %}
            {{ section.title }}
        {% else %}
            {{ section.title }} - {{ config.title }}
        {% endif %}
    {% else %}
        {{ config.title }}
    {% endif %}
{% endblock title %}

{% block extra_head %}
<style>
    .page-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 1rem;
        margin-bottom: 1.5rem;
        padding-bottom: 1.5rem;
        border-bottom: 1px solid var(--border-subtle);
    }

    .page-date {
        font-family: var(--font-mono);
        font-size: var(--text-sm);
        color: var(--text-tertiary);
        letter-spacing: 0.02em;
    }

    .page-tags {
        display: flex;
        gap: 0.5rem;
        flex-wrap: wrap;
    }

    .back-link {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        margin-top: 2rem;
        font-family: var(--font-mono);
        font-size: var(--text-sm);
        color: var(--text-tertiary);
        text-decoration: none;
        transition: color 0.15s ease;
    }

    .back-link::after {
        display: none;
    }

    .back-link:hover {
        color: var(--accent-gold);
    }
</style>
{% endblock extra_head %}

{% block content %}
    {% if page %}
        {% if not page.extra.no_header %}
            <h1>{{ page.title }}</h1>
        {% endif %}
        {% if page.date %}
            <div class="page-meta">
                <span class="page-date">{{ page.date | date(format="%B %d, %Y") }}</span>
                {% if page.taxonomies.tags %}
                    <div class="page-tags">
                        {% for tag in page.taxonomies.tags %}
                            <span class="tag">
                                <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}">
                                    {{ tag }}
                                </a>
                            </span>
                        {% endfor %}
                    </div>
                {% endif %}
            </div>
        {% endif %}
        {{ page.content | safe }}
    {% elif section %}
        <h1>{{ section.title }}</h1>
        {% if section.content %}
            {{ section.content | safe }}
        {% endif %}
        {% if section.pages %}
            <ul class="no-bullets">
            {% for page in section.pages %}
                <li>
                    <span class="page-date">{{ page.date | date(format="%b %d, %Y") }}</span>
                    <a href="{{ page.permalink | safe }}">{{ page.title }}</a>
                </li>
            {% endfor %}
            </ul>
        {% endif %}
    {% endif %}
    <a href="/" class="back-link">‚Üê Back to home</a>
{% endblock content %}
