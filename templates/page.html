{% extends "base.html" %}

{% block title %}
    {% if page %}
        {{ page.title }} - {{ config.title }}
    {% elif section %}
        {{ section.title }} - {{ config.title }}
    {% else %}
        {{ config.title }}
    {% endif %}
{% endblock title %}

{% block content %}
    {% if page %}
        {% if not page.extra.no_header %}
            <h1 class="page-title">{{ page.title }}</h1>
        {% endif %}

        <div class="post-metadata">
            {% if page.date %}
                <div class="metadata-item">
                    <span class="metadata-label">Created:</span> {{ page.date | date(format="%Y-%m-%d") }}
                </div>
            {% endif %}
            
            {% if page.updated %}
                <div class="metadata-item">
                    <span class="metadata-label">Modified:</span> {{ page.updated | date(format="%Y-%m-%d") }}
                </div>
            {% endif %}

            {% if page.extra.status %}
                <div class="metadata-item">
                    <span class="metadata-label">Status:</span> {{ page.extra.status }}
                </div>
            {% endif %}

            {% if page.extra.confidence %}
                <div class="metadata-item">
                    <span class="metadata-label">Certainty:</span> {{ page.extra.confidence }}
                </div>
            {% endif %}

            {% if page.extra.importance %}
                <div class="metadata-item">
                    <span class="metadata-label">Importance:</span> {{ page.extra.importance }}
                </div>
            {% endif %}

            {% if page.taxonomies.tags %}
                <div class="metadata-item">
                    <span class="metadata-label">Tags:</span>
                    {% for tag in page.taxonomies.tags %}
                        <a href="{{ get_taxonomy_url(kind='tags', name=tag) }}">{{ tag }}</a>{% if not loop.last %}, {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>

        <article class="{% if page.extra.blog or page.extra.drop_cap %}drop-cap{% endif %}">
            {{ page.content | safe }}
        </article>

    {% elif section %}
        <h1>{{ section.title }}</h1>
        {% if section.content %}
            {{ section.content | safe }}
        {% endif %}
        
        {% if section.pages %}
            <ul class="directory-list">
            {% for page in section.pages %}
            <li>
                <a href="{{ page.permalink | safe }}">{{ page.title }}</a>
                <span class="post-date">({{ page.date | date(format="%Y-%m-%d") }})</span>
            </li>
        {% endfor %}
        </ul>
    {% endif %}
{% endif %}

<div class="back-to-directory">
    <a href="/">‚Üê Back to Directory</a>
</div>
{% endblock content %}
